## 数值和字符串

### 数值

在编码之前，首先将数值转化为科学计数法的标准形式。如果一个浮点数可以被转化到整数，按照整数处理。

数值分为四类，每一类使用不同的标识位和编码方式：
|`int`or`float`|范围|标识符|编码方式|
|:-:|:-:|:-:|:--|
|`int`|`[-1,31]`|`G`|数值+1转化为6bit二进制|
|`int`|`other`|`A`|四进制长度+正负号+二进制|
|`float`||`T`|见下表|
|`float`|上一种超过32bit|`C`|IEEE 754浮点数编码|

浮点数的短编码(标识符为`T`)的组成：
|变量名|长度(bits)|描述|
|:-:|:-:|:--|
|`sign`|1|正负号|
|`len_value`|4|底数的四进制长度|
|`len_exponent`|3|指数位相反数减1|
|`number_str`|2~|底数的二进制表示|

### 字符串
编码器维护一个`list`，如果需要编码的字符串在该`list`中存在，返回索引；否则将字符串添加到`list`中并返回新的索引。

在文件整体编码完成后，将`list`的内容组合在一起打包压缩并逐字节编码，插入dna序列组中。

## `SVGNumber`的编码

单个数字：由`A`+具体的数字编码构成

多个数字：由`T`+数字数量（数字编码）+每个数字编码构成

## `SVGPathD`的编码

此编码方式专用于解决`path`标签中`d`属性的编码

- 首先将字符串中的多条路径拆分成路径的`list`
- 每条路径由命令类型+参数组成，分别编码如下：
    - 命令类型：

    |变量名|长度(bits)|描述|
    |:-:|:-:|:--|
    |`upper`|1|大写字母或小写字母|
    |`codec`|5|字母和`a/A`的差值|
    - 由于每种命令对应的参数数量是固定的，因此将每个参数经过上文的数字编码后接在命令类型后面即可
    - 路径命令支持若干相同命令不重复书写命令类型，因此在编码过程中读到多于参数数量的数字时，会自动补充当前的命令类型


## `SVGTransform`的编码

类似`SVGPathD`，区别在于有些命令的参数数量不同，因此需要把命令类型和参数数量合在一起考虑。